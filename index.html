<!doctype html> 
<html lang="en"> 
<head> 
	<meta charset="UTF-8" />
	<title> Be The Change</title>
	<script src="//cdn.jsdelivr.net/npm/phaser@3.11.0/dist/phaser.js"></script>
	<style type="text/css">
		body {
			margin: 0;
		}
	</style>
</head>
<body>

<script type="text/javascript">

	var config = {
		type: Phaser.AUTO,
		width: 2000,
		height: 2000,
		physics: {
			default: 'arcade',
			arcade: {
				debug: false
			}
		},
		scene: {
			preload: preload,
			create: create,
			update: update
		}
	};

	var player;
	var bad_ground;
	var cursors;
	var game = new Phaser.Game(config);

	function preload ()
	{
		this.load.image('bad_ground', 'assets/bad_ground.jpg');
		this.load.spritesheet('dude', 'assets/dude.png', { frameWidth: 32, frameHeight: 48 });
	}

	function create ()
	{
		bad_ground = this.physics.add.staticGroup();
		// bad_ground = this.add.tileSprite(600, 400, config.width, config.height, "bad_ground");

		bad_ground.create(1000, 1000, 'bad_ground');

		player = this.physics.add.sprite(1000, 1000, 'dude');
		this.cameras.main.x = -500;
		this.cameras.main.y = -500;


		player.setBounce(0.2);
		player.setCollideWorldBounds(true);

		this.anims.create({
			key: 'left',
			frames: this.anims.generateFrameNumbers('dude', { start: 0, end: 3 }),
			frameRate: 10,
			repeat: -1
		});

		this.anims.create({
			key: 'turn',
			frames: [ { key: 'dude', frame: 4 } ],
			frameRate: 20
		});

		this.anims.create({
			key: 'right',
			frames: this.anims.generateFrameNumbers('dude', { start: 5, end: 8 }),
			frameRate: 10,
			repeat: -1
		});

		cursors = this.input.keyboard.createCursorKeys();	
		// stars.children.iterate(function (child) {
		// 	child.setBounceY(Phaser.Math.FloatBetween(0.4, 0.8));
		// });

		this.physics.add.collider(player, bad_ground);
		// this.physics.add.overlap(player, stars, collectStar, null, this);
	}
	var speed = 10;
	function update ()
	{
		console.log(this.cameras.main.x, this.cameras.main.y);
		console.log(player.x, player.y, "asdhajsd");

		if (cursors.right.isDown)
		{	
			this.cameras.main.x -= speed;
			player.x += speed;
			player.anims.play('right', true);
		}
		else if (cursors.left.isDown)
		{
			this.cameras.main.x += speed;
			player.x -= speed;
			player.anims.play('left', true);
		}
		else if (cursors.up.isDown)
		{
			this.cameras.main.y += speed;
			player.y -= speed;
			player.anims.play('up', true);
		}
		else if (cursors.down.isDown)
		{
			this.cameras.main.y -= speed;
			player.y += speed;
			player.anims.play('down', true);	
		}
		else
		{
			player.anims.play('turn');
		}
		if(this.cameras.main.x > -2)
			this.cameras.main.x = -2;

		if(this.cameras.main.x < -700)
			this.cameras.main.x = -700;

		if(this.cameras.main.y > 4)
			this.cameras.main.y = 4;

		if(this.cameras.main.y < -1330)
			this.cameras.main.y = -1330;

		if(player.x < 600)
			player.x = 600;

		if(player.y < 350)
			player.y = 350;

		if(player.x > 1400)
			player.x = 1400;

		if(player.y > 1600)
			player.y = 1600;
	}

</script>

</body>
</html>